<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Configuración Ubuntu como Router/NAT</title>
  <style>
    body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
    code, pre { background: #f4f4f4; padding: 5px; border-radius: 5px; display: block; }
    h1, h2, h3 { color: #2c3e50; }
    ul { margin: 10px 0; }
  </style>
</head>
<body>
  <h1>Configurar Ubuntu Server como Router/NAT</h1>

  <p>Objetivo: Permitir que los equipos de la red <b>192.168.10.0/24</b> tengan acceso a Internet a través de tu servidor Ubuntu.</p>

  <h2>1. Configurar Netplan</h2>
  <p>Edita el archivo <code>/etc/netplan/00-installer-config.yaml</code>:</p>
  <pre>
network:
  version: 2
  renderer: networkd
  ethernets:
    ens33:
      dhcp4: no
      addresses:
        - 10.0.0.251/24
      routes:
        - to: default
          via: 10.0.0.1
      nameservers:
        addresses: [8.8.8.8, 1.1.1.1]
    ens37:
      dhcp4: no
      addresses:
        - 192.168.10.2/24
  </pre>

  <p>Aplica los cambios:</p>
  <pre>sudo netplan apply</pre>

  <h2>2. Habilitar reenvío de paquetes (IP forwarding)</h2>
  <p>Edita <code>/etc/sysctl.conf</code> y asegúrate de que contenga:</p>
  <pre>net.ipv4.ip_forward=1</pre>

  <p>Aplica sin reiniciar:</p>
  <pre>sudo sysctl -p</pre>

  <h2>3. Configurar NAT con iptables</h2>
  <p>Ejecuta:</p>
  <pre>sudo iptables -t nat -A POSTROUTING -s 192.168.10.0/24 -o ens33 -j MASQUERADE</pre>

  <h2>4. Hacer persistente la configuración de iptables</h2>
  <pre>
sudo apt install iptables-persistent -y
sudo netfilter-persistent save
  </pre>

  <h2>5. Configurar clientes de la red 192.168.10.0/24</h2>
  <ul>
    <li><b>IP:</b> 192.168.10.x/24 (ej: 192.168.10.100)</li>
    <li><b>Gateway:</b> 192.168.10.2</li>
    <li><b>DNS:</b> 8.8.8.8 (o el que prefieras)</li>
  </ul>

  <h2>6. Probar conectividad desde un cliente</h2>
  <pre>
ping 192.168.10.2      # prueba conexión al servidor
ping 8.8.8.8           # prueba salida a Internet
ping google.com        # prueba DNS
  </pre>

  <h2>✅ Resultado</h2>
  <p>Con estos pasos, tu Ubuntu Server funciona como <b>router y NAT</b> para dar acceso a Internet a toda la red <b>192.168.10.0/24</b>.</p>
</body>
</html>
